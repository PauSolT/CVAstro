---
import NavComponent from "./NavComponent.astro";

import i18next, { t } from "i18next";

// @ts-ignore
import { localizePath } from "astro-i18next";

const { pathname } = Astro.url;
---

<header>
    <div id="language">
        <NavComponent link={localizePath(pathname, "ca")} content="CA" />
        <NavComponent link={localizePath(pathname, "es")} content="ES" />
        <NavComponent link={localizePath(pathname, "en")} content="EN" />
    </div>

    <nav class="desktop">
        <NavComponent link={localizePath("/")} content={t("home")} />
        <NavComponent link={localizePath("/games")} content={t("games")} />
        <NavComponent link={localizePath("/about#")} content={t("about")} />
        <NavComponent
            link={localizePath("/about#contactMe")}
            content={t("contactMe")}
        />
        <NavComponent link={"/CVs/PAUCV_" + i18next.language.toUpperCase() +".pdf"} content="DOWNLOAD CV" download={"PauSole_CV"}/>
    </nav>
    <div class="dropdown">
        <button class="dropbtn">{t("menu")}</button>
        <div class="dropdown-content">
            <a class="component" href={localizePath("/")}>{t("home")}</a>
            <a class="component" href={localizePath("/games")}>{t("games")}</a>
            <a class="component" href={localizePath("/about#")}>{t("about")}</a>
            <a class="component" href={localizePath("/about#contactMe")}>{t("contactMe")}</a>
            <a class="component" href={"/CVs/PAUCV_" + i18next.language.toUpperCase() +".pdf"}>DOWNLOAD CV</a>
        </div>
    </div>
</header>

<style>
    header {
        width: 100%;
        height: 3rem;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        margin-right: 2vw;
        background-color: #1f2833;
        color: #c5c6c7;
        position: sticky;
        top: 0;
    }

    #language {
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        align-items: flex-start;
        align-self: center;
        max-width: 20%;
        flex-grow: 1;
    }

    .desktop {
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        align-self: center;
        flex-grow: 2;
        align-items: flex-end;
        max-width: 40%;
    }

    .desktop > a {
        color: inherit;
        text-decoration: none;
    }

    .dropbtn {
        background-color: #57ccc6;
        color: #242424;
        font-size: clamp(1rem, 1.5vw, 2rem);
        border: none;
        border-radius: 5px;
        padding-top: 10%;
        padding-bottom: 5%;
        width: 70px;
        text-align: center;
    }

    .dropdown {
        position: relative;
        display: inline-block;
        align-self: center;
        margin-right: 8%;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #c5c6c7;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
        right: 0;
        border-radius: 5px;
    }

    .dropdown-content a {
        color: #45a29e;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
    }

    .dropdown-content a:hover {
        background-color: #ddd;
    }

    .dropdown:hover .dropdown-content {
        display: block;
    }

    .dropdown:hover .dropbtn {
        background-color: #45a29e;
    }

    @media only screen and (min-width: 760px) {
        .dropdown {
            display: none;
        }
    }

    @media only screen and (max-width: 760px) {
        #language {
            max-width: 35%;
        }

        .desktop {
            display: none;
        }
    }
</style>